{% extends "base.html" %}

{% block title %}AGBOT - Scan History{% endblock %}

{% block content %}
<div class="history-page">
    <div class="history-header">
        <div class="header-content">
            <h1>Scan History</h1>
            <p>Review your past plant health assessments</p>
        </div>
    </div>

    <!-- Statistics Summary -->
    <div class="history-stats">
        <div class="stat-item">
            <div class="stat-number">{{ stats.total_scans }}</div>
            <div class="stat-label">Total Scans</div>
        </div>
        <div class="stat-item pest">
            <div class="stat-number">{{ stats.pests_found }}</div>
            <div class="stat-label">Pests Found</div>
        </div>
        <div class="stat-item healthy">
            <div class="stat-number">{{ stats.healthy }}</div>
            <div class="stat-label">Healthy</div>
        </div>
    </div>

    <!-- Recent Scans -->
    <div class="history-content">
        <div class="section-header">
            <h2>Recent Scans</h2>
            <a href="#" class="view-all-link">View All</a>
        </div>

        <div class="scan-list">
            {% for scan in history %}
            <div class="scan-item">
                <div class="scan-icon {{ 'healthy' if scan.severity == 'Healthy' else 'pest' }}">
                    <i class="fas fa-{{ 'leaf' if scan.severity == 'Healthy' else 'bug' }}"></i>
                </div>
                <div class="scan-details">
                    <h3>{{ scan.plant }}</h3>
                    <p>{{ scan.pest }}</p>
                    <div class="scan-meta">
                        <span><i class="far fa-calendar"></i> {{ scan.date }}</span>
                        <span><i class="far fa-clock"></i> {{ scan.time }}</span>
                    </div>
                </div>
                <div class="severity-badge {{ scan.severity.lower() }}">
                    {{ scan.severity }}
                </div>
                <button class="view-details">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            {% endfor %}
        </div>

        <!-- Weekly Insight -->
        <div class="insight-card">
            <div class="insight-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="insight-content">
                <h3>Weekly Insight</h3>
                <p>Aphid activity has increased by 15% this week. Consider preventive measures for vulnerable crops.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// View details functionality
document.querySelectorAll('.view-details').forEach(button => {
    button.addEventListener('click', (e) => {
        // In a real app, this would navigate to a detailed view
        alert('Detailed view coming soon!');
    });
});

// Filter functionality could be added here
</script>
{% endblock %}
